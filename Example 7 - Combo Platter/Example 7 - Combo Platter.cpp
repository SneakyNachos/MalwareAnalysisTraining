// Example 7 - Combo Platter.cpp : This file contains the 'main' function. Program execution begins and ends there.
//

#include "pch.h"
#include <iostream>
#include <string>
#include <Windows.h>
#include <comdef.h>
#include <shlwapi.h>

#using <mscorlib.dll>
#using <System.dll>

#include <tchar.h>

using namespace std;
using namespace System;
using namespace System::Net;
using namespace System::IO;


void error(DWORD retval) {
	_com_error error(retval);
	wcout << error.ErrorMessage() << endl;
}

string encryptDecrypt(string toEncrypt) {
	string output = toEncrypt;

	for (int i = 0; i < toEncrypt.size(); i++)
		output[i] = toEncrypt[i] ^ 0x5a;

	return output;
}

int main()
{
	String^ url = "https://www.github.com";
	Uri^ myUri = gcnew Uri(url);
	HttpWebResponse^ res = nullptr;
	ServicePointManager::SecurityProtocol = SecurityProtocolType::Tls | SecurityProtocolType::Ssl3 | SecurityProtocolType::Tls11 | SecurityProtocolType::Tls12;
	ServicePointManager::UseNagleAlgorithm = true;
	ServicePointManager::Expect100Continue = true;
	ServicePointManager::CheckCertificateRevocationList = true;
	ServicePoint^ mySP;
	
	HttpWebRequest ^wrGETURL;
	wrGETURL = dynamic_cast<HttpWebRequest^>(HttpWebRequest::Create(url));
	res = dynamic_cast<HttpWebResponse^>(wrGETURL->GetResponse());
	mySP = wrGETURL->ServicePoint;

	Stream ^objStream = res->GetResponseStream();
	StreamReader ^objReader = gcnew StreamReader(objStream);
	String^ sline = "";
	Int32 i = 0;
	sline = objReader->ReadToEnd();	
	Console::WriteLine(sline);

		
	
	
	
	
}

